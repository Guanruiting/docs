<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2.1.2 虚拟DOM和JSX | 网易高级前端微专业课堂笔记</title>
    <meta name="description" content="每天进步一点点,活到老，学到死。">
    <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/docs/assets/css/0.styles.2e4612f5.css" as="style"><link rel="preload" href="/docs/assets/js/app.272d4102.js" as="script"><link rel="preload" href="/docs/assets/js/2.95440834.js" as="script"><link rel="preload" href="/docs/assets/js/26.f84817cd.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.0fc54824.js"><link rel="prefetch" href="/docs/assets/js/100.d467ed7f.js"><link rel="prefetch" href="/docs/assets/js/101.ad8c0abc.js"><link rel="prefetch" href="/docs/assets/js/102.ab51c402.js"><link rel="prefetch" href="/docs/assets/js/103.5fe06f15.js"><link rel="prefetch" href="/docs/assets/js/104.d7633062.js"><link rel="prefetch" href="/docs/assets/js/105.3fe903ee.js"><link rel="prefetch" href="/docs/assets/js/106.2fcba630.js"><link rel="prefetch" href="/docs/assets/js/107.edd971c2.js"><link rel="prefetch" href="/docs/assets/js/108.0493c7c8.js"><link rel="prefetch" href="/docs/assets/js/109.fd8a9d07.js"><link rel="prefetch" href="/docs/assets/js/11.5a44deff.js"><link rel="prefetch" href="/docs/assets/js/110.bec6562b.js"><link rel="prefetch" href="/docs/assets/js/111.168e9f07.js"><link rel="prefetch" href="/docs/assets/js/112.f6813d06.js"><link rel="prefetch" href="/docs/assets/js/113.88f0df80.js"><link rel="prefetch" href="/docs/assets/js/114.250cd48f.js"><link rel="prefetch" href="/docs/assets/js/115.a37e1cd4.js"><link rel="prefetch" href="/docs/assets/js/116.4fafb93e.js"><link rel="prefetch" href="/docs/assets/js/12.1522d452.js"><link rel="prefetch" href="/docs/assets/js/13.4f607d49.js"><link rel="prefetch" href="/docs/assets/js/14.75ef1aba.js"><link rel="prefetch" href="/docs/assets/js/15.d78c74f4.js"><link rel="prefetch" href="/docs/assets/js/16.b270984d.js"><link rel="prefetch" href="/docs/assets/js/17.21b31205.js"><link rel="prefetch" href="/docs/assets/js/18.3800f71e.js"><link rel="prefetch" href="/docs/assets/js/19.787e8457.js"><link rel="prefetch" href="/docs/assets/js/20.4bdd2ab4.js"><link rel="prefetch" href="/docs/assets/js/21.a236867f.js"><link rel="prefetch" href="/docs/assets/js/22.1a81d6f1.js"><link rel="prefetch" href="/docs/assets/js/23.f0bf2700.js"><link rel="prefetch" href="/docs/assets/js/24.06b09870.js"><link rel="prefetch" href="/docs/assets/js/25.56cf02c9.js"><link rel="prefetch" href="/docs/assets/js/27.9b4811d5.js"><link rel="prefetch" href="/docs/assets/js/28.335f50a1.js"><link rel="prefetch" href="/docs/assets/js/29.71a061ad.js"><link rel="prefetch" href="/docs/assets/js/3.5a9f8b7c.js"><link rel="prefetch" href="/docs/assets/js/30.ea83b87c.js"><link rel="prefetch" href="/docs/assets/js/31.99731a8f.js"><link rel="prefetch" href="/docs/assets/js/32.c016cbcb.js"><link rel="prefetch" href="/docs/assets/js/33.6bead5ed.js"><link rel="prefetch" href="/docs/assets/js/34.0bd232ee.js"><link rel="prefetch" href="/docs/assets/js/35.bea81fbf.js"><link rel="prefetch" href="/docs/assets/js/36.ca903df3.js"><link rel="prefetch" href="/docs/assets/js/37.b71de5f6.js"><link rel="prefetch" href="/docs/assets/js/38.676f28a6.js"><link rel="prefetch" href="/docs/assets/js/39.bda860a7.js"><link rel="prefetch" href="/docs/assets/js/4.2074a04a.js"><link rel="prefetch" href="/docs/assets/js/40.bb7f544c.js"><link rel="prefetch" href="/docs/assets/js/41.acc2d862.js"><link rel="prefetch" href="/docs/assets/js/42.d33fdf03.js"><link rel="prefetch" href="/docs/assets/js/43.1c4ff810.js"><link rel="prefetch" href="/docs/assets/js/44.a97b447d.js"><link rel="prefetch" href="/docs/assets/js/45.1c7a172e.js"><link rel="prefetch" href="/docs/assets/js/46.8b50db7f.js"><link rel="prefetch" href="/docs/assets/js/47.da0b58ae.js"><link rel="prefetch" href="/docs/assets/js/48.2acda1ca.js"><link rel="prefetch" href="/docs/assets/js/49.01ef5a98.js"><link rel="prefetch" href="/docs/assets/js/5.84887b41.js"><link rel="prefetch" href="/docs/assets/js/50.6514d23a.js"><link rel="prefetch" href="/docs/assets/js/51.a1534559.js"><link rel="prefetch" href="/docs/assets/js/52.c293af0c.js"><link rel="prefetch" href="/docs/assets/js/53.3e0083be.js"><link rel="prefetch" href="/docs/assets/js/54.9e575d30.js"><link rel="prefetch" href="/docs/assets/js/55.c59fbd1a.js"><link rel="prefetch" href="/docs/assets/js/56.f9626804.js"><link rel="prefetch" href="/docs/assets/js/57.ac1ac337.js"><link rel="prefetch" href="/docs/assets/js/58.45c4cdad.js"><link rel="prefetch" href="/docs/assets/js/59.73772208.js"><link rel="prefetch" href="/docs/assets/js/6.d637f9c8.js"><link rel="prefetch" href="/docs/assets/js/60.9fbf8c0b.js"><link rel="prefetch" href="/docs/assets/js/61.a025f642.js"><link rel="prefetch" href="/docs/assets/js/62.7456002f.js"><link rel="prefetch" href="/docs/assets/js/63.d0aff190.js"><link rel="prefetch" href="/docs/assets/js/64.b245deee.js"><link rel="prefetch" href="/docs/assets/js/65.4f9fff4e.js"><link rel="prefetch" href="/docs/assets/js/66.2236a86f.js"><link rel="prefetch" href="/docs/assets/js/67.c2d33d06.js"><link rel="prefetch" href="/docs/assets/js/68.5e539bac.js"><link rel="prefetch" href="/docs/assets/js/69.4f051e4c.js"><link rel="prefetch" href="/docs/assets/js/7.7eb23afc.js"><link rel="prefetch" href="/docs/assets/js/70.e5b88c1a.js"><link rel="prefetch" href="/docs/assets/js/71.333412ce.js"><link rel="prefetch" href="/docs/assets/js/72.dee249c9.js"><link rel="prefetch" href="/docs/assets/js/73.4da029b8.js"><link rel="prefetch" href="/docs/assets/js/74.ddc0a9ea.js"><link rel="prefetch" href="/docs/assets/js/75.8cf5eae1.js"><link rel="prefetch" href="/docs/assets/js/76.ba77d5c8.js"><link rel="prefetch" href="/docs/assets/js/77.80c6d4b2.js"><link rel="prefetch" href="/docs/assets/js/78.9df234e4.js"><link rel="prefetch" href="/docs/assets/js/79.b43588e3.js"><link rel="prefetch" href="/docs/assets/js/8.4bed17d5.js"><link rel="prefetch" href="/docs/assets/js/80.ffd5512e.js"><link rel="prefetch" href="/docs/assets/js/81.ef9fe33d.js"><link rel="prefetch" href="/docs/assets/js/82.eb3d7419.js"><link rel="prefetch" href="/docs/assets/js/83.0d06a278.js"><link rel="prefetch" href="/docs/assets/js/84.92a3d422.js"><link rel="prefetch" href="/docs/assets/js/85.41295fda.js"><link rel="prefetch" href="/docs/assets/js/86.40f79a24.js"><link rel="prefetch" href="/docs/assets/js/87.58d9f903.js"><link rel="prefetch" href="/docs/assets/js/88.18704fb2.js"><link rel="prefetch" href="/docs/assets/js/89.05f0aef8.js"><link rel="prefetch" href="/docs/assets/js/9.59265f23.js"><link rel="prefetch" href="/docs/assets/js/90.9b200c45.js"><link rel="prefetch" href="/docs/assets/js/91.4222db25.js"><link rel="prefetch" href="/docs/assets/js/92.f918a738.js"><link rel="prefetch" href="/docs/assets/js/93.24fd02f0.js"><link rel="prefetch" href="/docs/assets/js/94.db1b55c6.js"><link rel="prefetch" href="/docs/assets/js/95.08b45146.js"><link rel="prefetch" href="/docs/assets/js/96.3dba9c7d.js"><link rel="prefetch" href="/docs/assets/js/97.0f562828.js"><link rel="prefetch" href="/docs/assets/js/98.6ae1925d.js"><link rel="prefetch" href="/docs/assets/js/99.5760072c.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.2e4612f5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">网易高级前端微专业课堂笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/docs/config/" class="nav-link">Config</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/docs/config/" class="nav-link">Config</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>🔥设计模式 jQuery 源码分析</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/" class="sidebar-link">一、核心功能</a></li><li><a href="/docs/2m1y1.html" class="sidebar-link">2.1.1jQuery整体架构-核心功能函数揭秘</a></li><li><a href="/docs/" class="sidebar-link">二、Sizzle</a></li><li><a href="/docs/hz63rc.html" class="sidebar-link">2.2.1 选择器</a></li><li><a href="/docs/cecvfl.html" class="sidebar-link">【课后思考题】2.2.1 选择器</a></li><li><a href="/docs/" class="sidebar-link">三、回调对象设计</a></li><li><a href="/docs/ab0wup.html" class="sidebar-link">2.3.1 Callbacks入门&amp;原理分析</a></li><li><a href="/docs/fgx4x0.html" class="sidebar-link">【答疑直播】2.1.1-2.3.1 答疑解惑</a></li><li><a href="/docs/" class="sidebar-link">四、异步回调解决方案</a></li><li><a href="/docs/gfci0o.html" class="sidebar-link">2.4.1 延时对象-Deferred概念 &amp; 源码剖析</a></li><li><a href="/docs/" class="sidebar-link">五、事件绑定</a></li><li><a href="/docs/ehd879.html" class="sidebar-link">2.5.1 事件绑定-bind/delegate/on</a></li><li><a href="/docs/izbz7p.html" class="sidebar-link">2.5.2 事件绑定-体系结构 / 委托设计</a></li><li><a href="/docs/rd6bte.html" class="sidebar-link">2.5.3 事件绑定-自定义设计 &amp; 模拟事件</a></li><li><a href="/docs/vfcbk0.html" class="sidebar-link">【答疑直播】2.4.1-2.5.3答疑直播</a></li><li><a href="/docs/" class="sidebar-link">六、DOM操作 &amp; 样式操作</a></li><li><a href="/docs/fr9k19.html" class="sidebar-link">2.6.1 DOM操作方法-html,text,css</a></li><li><a href="/docs/kicsgq.html" class="sidebar-link">2.6.2 - 2.6.3 DOM操作核心 &amp; CSS / addClass原理分析</a></li><li><a href="/docs/" class="sidebar-link">七、高级进阶-动画队列</a></li><li><a href="/docs/emb8v0.html" class="sidebar-link">2.7.1 动画队列 / 动画设计 / 动画实现</a></li><li><a href="/docs/png5i8.html" class="sidebar-link">【直播答疑】设计模式 jQuery源码分析章节答疑</a></li><li><a href="/docs/zh1hg5.html" class="sidebar-link">《设计模式 jQuery源码分析 》练习</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>🔥函数式编程 Underscore 源码分析</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/" class="sidebar-link">一、Underscore设计篇</a></li><li><a href="/docs/snk5af.html" class="sidebar-link">3.1.1 函数式编程思想概述</a></li><li><a href="/docs/torhfg.html" class="sidebar-link">3.1.2 underscore整体结构 &amp; 面向对象</a></li><li><a href="/docs/fnamuc.html" class="sidebar-link">3.1.3 undefined的处理 / 函数式编程(回调)iteratee设计</a></li><li><a href="/docs/kkfbnv.html" class="sidebar-link">3.1.4 rest参数 / underscore创建对象方式</a></li><li><a href="/docs/rugzi6.html" class="sidebar-link">【答疑直播】3.1.1-3.1.4答疑直播</a></li><li><a href="/docs/" class="sidebar-link">二、Underscore辅助功能篇</a></li><li><a href="/docs/qbd392.html" class="sidebar-link">3.2.1 Map-reduce 真值检测函数</a></li><li><a href="/docs/qvg4it.html" class="sidebar-link">3.2.2 indexOf lastIndexOf条件查询-背后索引查询器实现</a></li><li><a href="/docs/rs64o0.html" class="sidebar-link">3.2.3 乱序数组 - 洗牌算法</a></li><li><a href="/docs/" class="sidebar-link">三、Underscore 数组篇</a></li><li><a href="/docs/fg8ic9.html" class="sidebar-link">3.3.1 underscore数组定位 &amp; 摊平数组</a></li><li><a href="/docs/uahtcy.html" class="sidebar-link">3.3.2 数组运算uniq去重函数 原生对象扩展</a></li><li><a href="/docs/" class="sidebar-link">四、Underscore 函数篇</a></li><li><a href="/docs/nhnrg5.html" class="sidebar-link">3.4.1 偏函数(partial) / 缓存(memoize)使用场景 源码分析</a></li><li><a href="/docs/otm4ut.html" class="sidebar-link">3.4.2 延时执行函数- compose-escape字符串逃逸</a></li><li><a href="/docs/ggrlg1.html" class="sidebar-link">3.4.3 throttle 与 debounce 概念解析源码实现</a></li><li><a href="/docs/" class="sidebar-link">五、Underscore 对象篇</a></li><li><a href="/docs/wxlu68.html" class="sidebar-link">3.5.1 属性操作 &amp; createAssigner</a></li><li><a href="/docs/byiw6o.html" class="sidebar-link">3.5.2 deepclone 深度克隆 &amp; pick</a></li><li><a href="/docs/edf19t.html" class="sidebar-link">3.5.3template模板引擎设计</a></li><li><a href="/docs/mggvoz.html" class="sidebar-link">【直播答疑】函数式编程 Underscore源码分析章节答疑</a></li><li><a href="/docs/mw656g.html" class="sidebar-link">《函数式编程 Underscore源码分析》练习</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>🔥模块化编程 自研模块加载器</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/" class="sidebar-link">一、模块加载器设计概要</a></li><li><a href="/docs/azqsn2.html" class="sidebar-link">4.1.1 模块系统概述-自定义模块规范-书写约定</a></li><li><a href="/docs/fz455z.html" class="sidebar-link">4.1.2 加载器结构设计导论</a></li><li><a href="/docs/" class="sidebar-link">二、模块加载器设计核心</a></li><li><a href="/docs/oq62cu.html" class="sidebar-link">4.2.1 Module构造器设计 模块数据初始化</a></li><li><a href="/docs/el3l0l.html" class="sidebar-link">4.2.2 模块资源定位-异步加载</a></li><li><a href="/docs/olxmrr.html" class="sidebar-link">4.2.3 依赖解析-依赖管理处理方案</a></li><li><a href="/docs/fvkrun.html" class="sidebar-link">4.2.4 模块(路径)短名称配置解决方案</a></li><li><a href="/docs/xk1rtn.html" class="sidebar-link">【直播答疑】模块化编程 自研模块加载器章节答疑</a></li><li><a href="/docs/iwccwo.html" class="sidebar-link">《模块化编程 自研模块加载器》练习</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>🔥Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/" class="sidebar-link">一、Vue基础知识</a></li><li><a href="/docs/gglnq8.html" class="sidebar-link">1.1.1 Vue思想</a></li><li><a href="/docs/geoolr.html" class="sidebar-link">1.1.2 Vue内部运行机制</a></li><li><a href="/docs/uk9ewf.html" class="sidebar-link">1.1.3 Vue事件绑定</a></li><li><a href="/docs/mn5sey.html" class="sidebar-link">1.1.4 Watch和Computed</a></li><li><a href="/docs/wqx0s9.html" class="sidebar-link">1.1.5 Vue生命周期</a></li><li><a href="/docs/hldv9h.html" class="sidebar-link">1.1.6 Vue组件及通讯</a></li><li><a href="/docs/lscdmz.html" class="sidebar-link">1.1.7 Vue内置动画</a></li><li><a href="/docs/zmdfgc.html" class="sidebar-link">1.1.8 插槽</a></li><li><a href="/docs/otdwkg.html" class="sidebar-link">1.1.9 自定义指令</a></li><li><a href="/docs/" class="sidebar-link">二、Vue进阶知识</a></li><li><a href="/docs/dfi63n.html" class="sidebar-link">1.2.1 Vue-cli搭建项目与项目结构分析</a></li><li><a href="/docs/if2q37.html" class="sidebar-link">1.2.2 路由搭建、Vue-router常用操作</a></li><li><a href="/docs/zi45gg.html" class="sidebar-link">1.2.3 Vuex的使用与常用操作</a></li><li><a href="/docs/vicpw6.html" class="sidebar-link">1.2.4 Axios的使用</a></li><li><a href="/docs/" class="sidebar-link">三、Vue源码分析</a></li><li><a href="/docs/gc1xva.html" class="sidebar-link">1.3.1 Vue生命周期钩子函数执行原理分析</a></li><li><a href="/docs/ooaise.html" class="sidebar-link">1.3.2 Vue响应式系统搭建</a></li><li><a href="/docs/rp5g3f.html" class="sidebar-link">1.3.3 Vue 模板编译渲染函数原理分析</a></li><li><a href="/docs/" class="sidebar-link">四、补充直播</a></li><li><a href="/docs/livgw8.html" class="sidebar-link">Vue-cli3 &amp; Axios &amp; Derectives</a></li><li><a href="/docs/bzsia7.html" class="sidebar-link">Keep-alive、组件封装与继承(mixins,extend)</a></li><li><a href="/docs/bmhikn.html" class="sidebar-link">插件封装、Render函数</a></li><li><a href="/docs/" class="sidebar-link">五、案例：Vue在网易的实践</a></li><li><a href="/docs/co2ux2.html" class="sidebar-link">1.4.1 前端架构设计、按需引入ElementUI</a></li><li><a href="/docs/lvt5ta.html" class="sidebar-link">1.4.2 Vue在网易的实践</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>🔥React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/" class="sidebar-link">一、React基础</a></li><li><a href="/docs/oymhiu.html" class="sidebar-link">2.1.1 React介绍与React代码规范</a></li><li><a href="/docs/emgcy0.html" class="active sidebar-link">2.1.2 虚拟DOM和JSX</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/emgcy0.html#jsx写法" class="sidebar-link">JSX写法</a></li><li class="sidebar-sub-header"><a href="/docs/emgcy0.html#虚拟dom原理" class="sidebar-link">虚拟DOM原理</a></li><li class="sidebar-sub-header"><a href="/docs/emgcy0.html#tree-diff算法" class="sidebar-link">Tree-Diff算法</a></li><li class="sidebar-sub-header"><a href="/docs/emgcy0.html#课后思考" class="sidebar-link">课后思考:</a></li></ul></li><li><a href="/docs/xf9o15.html" class="sidebar-link">2.1.3 生命周期与数据操作</a></li><li><a href="/docs/luvw6o.html" class="sidebar-link">2.1.4 组件通信</a></li><li><a href="/docs/ypo1ha.html" class="sidebar-link">2.1.5 ReactDOM与表单</a></li><li><a href="/docs/ssosg9.html" class="sidebar-link">2.1.6 React与es6</a></li><li><a href="/docs/kpipqe.html" class="sidebar-link">2.1.7 自定义组件</a></li><li><a href="/docs/anykbu.html" class="sidebar-link">React基础答疑</a></li><li><a href="/docs/" class="sidebar-link">二、React进阶</a></li><li><a href="/docs/nlq5f6.html" class="sidebar-link">2.2.1 高阶组件</a></li><li><a href="/docs/xr4dqu.html" class="sidebar-link">2.2.2 React Hooks</a></li><li><a href="/docs/fw9x5v.html" class="sidebar-link">2.2.3 React 与 Typescript</a></li><li><a href="/docs/wq1fqd.html" class="sidebar-link">2.2.4 数据管理(Redux)</a></li><li><a href="/docs/wgu5yd.html" class="sidebar-link">2.2.5 数据管理(Mobx)</a></li><li><a href="/docs/yyxmos.html" class="sidebar-link">2.2.6 常用组件库ant-design</a></li><li><a href="/docs/" class="sidebar-link">三、React生态</a></li><li><a href="/docs/pqqmr1.html" class="sidebar-link">2.3.1 路由(React-Router)原理</a></li><li><a href="/docs/iq8vnf.html" class="sidebar-link">2.3.2 React动画</a></li><li><a href="/docs/gyyy1l.html" class="sidebar-link">2.3.3 可视化</a></li><li><a href="/docs/fmxr7d.html" class="sidebar-link">2.3.4 企业级框架umi + dva</a></li><li><a href="/docs/vey6h8.html" class="sidebar-link">2.3.5 工程化与webpack</a></li><li><a href="/docs/ag3qn2.html" class="sidebar-link">2.3.6 单元测试</a></li><li><a href="/docs/plkw7v.html" class="sidebar-link">案例：2.5.1 React在网易的实践</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>🔥 Webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/" class="sidebar-link">一、webpack 的概念和基础使用</a></li><li><a href="/docs/dgg364.html" class="sidebar-link">3.1.0 webpack导学</a></li><li><a href="/docs/ha44ms.html" class="sidebar-link">3.1.1 webpack的概念与安装</a></li><li><a href="/docs/dgdkh8.html" class="sidebar-link">3.1.2 前端模块化</a></li><li><a href="/docs/gly4n5.html" class="sidebar-link">3.1.3 Webpack的核心概念</a></li><li><a href="/docs/tcfyq7.html" class="sidebar-link">3.1.4 用webpack开始一次打包</a></li><li><a href="/docs/qu1sn5.html" class="sidebar-link">3.1.5 javascript的编译</a></li><li><a href="/docs/ig9o4c.html" class="sidebar-link">3.1.6 css的编译</a></li><li><a href="/docs/vkboxc.html" class="sidebar-link">3.1.7 html文件的打包</a></li><li><a href="/docs/idl16r.html" class="sidebar-link">3.1.8 webpack的环境</a></li><li><a href="/docs/ag91wy.html" class="sidebar-link">二、webpack 实战演练</a></li><li><a href="/docs/pvbye4.html" class="sidebar-link">3.2.1 webpack-dev-server的使用</a></li><li><a href="/docs/omo63d.html" class="sidebar-link">3.2.2 webpack原理解析</a></li><li><a href="/docs/vvwp5m.html" class="sidebar-link">3.2.3 图片等资源的处理回放</a></li><li><a href="/docs/hwxtac.html" class="sidebar-link">3.2.4 代码分割 &amp; 3.2.5 js代码大小控制</a></li><li><a href="/docs/lg5nu0.html" class="sidebar-link">3.2.6 webpack打包速度优化</a></li><li><a href="/docs/ex2q8d.html" class="sidebar-link">案例：3.3.1 网易的Webpack工程化实践</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>🔥VuePress项目实战</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/la4kpg.html" class="sidebar-link">4.1.0-VuePress课程导学</a></li><li><a href="/docs/bg6ka7.html" class="sidebar-link">4.1.1 设计-运行原理</a></li><li><a href="/docs/wnigom.html" class="sidebar-link">4.1.2 基本配置</a></li><li><a href="/docs/gtdr35.html" class="sidebar-link">4.1.3 Markdown</a></li><li><a href="/docs/bgmf1l.html" class="sidebar-link">4.1.4 上线部署 搭建你的专属博客</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>=== Node开发工程师 ===</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/" class="sidebar-link">=== 网易商业化项目分享 ===</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2-1-2-虚拟dom和jsx"><a href="#_2-1-2-虚拟dom和jsx" class="header-anchor">#</a> 2.1.2 虚拟DOM和JSX</h1> <h2 id="jsx写法"><a href="#jsx写法" class="header-anchor">#</a> JSX写法</h2> <h3 id="es6组件"><a href="#es6组件" class="header-anchor">#</a> ES6组件</h3> <p>&lt;p&gt;&lt;img alt=&quot;image.png&quot; title=&quot;image.png&quot; src=&quot;https://cdn.nlark.com/yuque/0/2019/png/325426/1564196202288-d0c44887-d017-4846-a90b-ce34bde389c8.png#align=left&amp;display=inline&amp;height=778&amp;name=image.png&amp;originHeight=542&amp;originWidth=520&amp;size=117321&amp;status=done&amp;width=746&quot; style=&quot;max-width: 600px; width: 746px;&quot;&gt;&lt;/p&gt;</p> <h3 id="get-started"><a href="#get-started" class="header-anchor">#</a> Get started</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span>
<span class="token comment">// import App from './App'</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> serviceWorker <span class="token keyword">from</span> <span class="token string">'./serviceWorker'</span>

<span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>list<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">List</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
 <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token punctuation">(</span>
     <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>List<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
   <span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Filter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
 <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token punctuation">(</span>
     <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Filter<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
   <span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
 <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token punctuation">(</span>
     <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
       App remdere
       <span class="token operator">&lt;</span>list<span class="token operator">&gt;</span>
     	<span class="token punctuation">{</span>list<span class="token punctuation">}</span>
       <span class="token operator">&lt;</span>filter<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>list<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
   <span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>app<span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
</code></pre></div><p>&lt;/app&gt;</p> <h3 id="变量和组件"><a href="#变量和组件" class="header-anchor">#</a> 变量和组件</h3> <p>&lt;p&gt;&lt;span style=&quot;background-color: #FADB14;&quot;&gt;变量&lt;/span&gt;&lt;/p&gt;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>list<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>list<span class="token punctuation">}</span> 
</code></pre></div><p>&lt;p&gt;&lt;span style=&quot;background-color: #FADB14;&quot;&gt;组件&lt;/span&gt;&lt;/p&gt;&lt;p&gt;创建虚拟DOM，具有生命周期等特性。&lt;/p&gt;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">List</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
 <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token punctuation">(</span>
     <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>List<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
   <span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>&lt;p&gt;&lt;span&gt;相当于一个类，可以有多个实例对象。&lt;/span&gt;&lt;/p&gt;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>list<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>list<span class="token operator">&gt;</span> 
</code></pre></div><p>&lt;/list&gt;&lt;/list&gt;&lt;p&gt;&lt;span style=&quot;background-color: #FADB14;&quot;&gt;生命周期钩子&lt;/span&gt;&lt;/p&gt;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">componentWillUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> 
</code></pre></div><p>&lt;p&gt;React实际项目组件实现，通过文件夹把组件管理起来。&lt;/p&gt;&lt;p&gt;&lt;img alt=&quot;image.png&quot; title=&quot;image.png&quot; src=&quot;https://cdn.nlark.com/yuque/0/2019/png/325426/1564197794958-36494c33-1210-4b08-8a96-a0fabf7a0efd.png#align=left&amp;display=inline&amp;height=108&amp;name=image.png&amp;originHeight=216&amp;originWidth=214&amp;size=7623&amp;status=done&amp;width=107&quot; style=&quot;max-width: 600px; width: 107px;&quot;&gt;&lt;/p&gt;</p> <h3 id="函数式组件"><a href="#函数式组件" class="header-anchor">#</a> 函数式组件</h3> <p>&lt;p&gt;可以理解为ES6组件的简写。&lt;/p&gt;&lt;p&gt;&lt;img alt=&quot;image.png&quot; title=&quot;image.png&quot; src=&quot;https://cdn.nlark.com/yuque/0/2019/png/325426/1564197875422-1d3fa0be-a9f8-4032-bb9c-5ce254056672.png#align=left&amp;display=inline&amp;height=579&amp;name=image.png&amp;originHeight=493&amp;originWidth=310&amp;size=80602&amp;status=done&amp;width=364&quot; style=&quot;max-width: 600px; width: 364px;&quot;&gt;&lt;/p&gt;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token punctuation">(</span>
   <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
 <span class="token punctuation">)</span>
<span class="token punctuation">}</span> 
</code></pre></div><h3 id="js与html混写"><a href="#js与html混写" class="header-anchor">#</a> JS与HTML混写</h3> <p>&lt;p&gt;&lt;img alt=&quot;image.png&quot; title=&quot;image.png&quot; src=&quot;https://cdn.nlark.com/yuque/0/2019/png/325426/1564202916716-40ece09d-ff7a-4a13-b9d3-b2f12df5fb49.png#align=left&amp;display=inline&amp;height=511&amp;name=image.png&amp;originHeight=529&amp;originWidth=515&amp;size=134449&amp;status=done&amp;width=497&quot; style=&quot;max-width: 600px; width: 497px;&quot;&gt;&lt;/p&gt;</p> <h3 id="变量渲染"><a href="#变量渲染" class="header-anchor">#</a> 变量渲染</h3> <p>&lt;p&gt;哪些变量可以写进DOM变量里？&lt;/p&gt;&lt;p&gt;可渲染：数组（DOM结构数组）、字符、布尔值、DOM节点&lt;/p&gt;&lt;p&gt;不能渲染：对象&lt;/p&gt;&lt;p&gt;条件性渲染：&lt;/p&gt;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">class</span> <span class="token class-name">List</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
 <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">]</span>
   <span class="token keyword">const</span> nodes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>aaa<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>bbb<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">]</span>
   <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token string">'a'</span>
   <span class="token keyword">const</span> showTitle <span class="token operator">=</span> <span class="token boolean">true</span>
   <span class="token keyword">const</span> show <span class="token operator">=</span> <span class="token boolean">false</span>
   <span class="token keyword">return</span> <span class="token punctuation">(</span>
     <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
       <span class="token punctuation">{</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token keyword">null</span>
         <span class="token punctuation">}</span>
         <span class="token keyword">return</span> <span class="token punctuation">(</span>
           <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
         <span class="token punctuation">)</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
       <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>nodes<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>a<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
   			<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>showTitle<span class="token operator">&amp;&amp;</span><span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>title<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>show <span class="token operator">?</span> <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>title<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span> <span class="token punctuation">:</span> <span class="token string">'xxxxx'</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
   <span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> List

</code></pre></div><h2 id="虚拟dom原理"><a href="#虚拟dom原理" class="header-anchor">#</a> 虚拟DOM原理</h2> <p>&lt;p&gt;把JSX渲染成JS&lt;/p&gt;&lt;p&gt;&lt;img alt=&quot;image.png&quot; title=&quot;image.png&quot; src=&quot;https://cdn.nlark.com/yuque/0/2019/png/325426/1564203081970-2b54e232-82b2-4a26-bcfb-dbe6f7ac3160.png#align=left&amp;display=inline&amp;height=254&amp;name=image.png&amp;originHeight=259&amp;originWidth=417&amp;size=63792&amp;status=done&amp;width=409&quot; style=&quot;max-width: 600px; width: 409px;&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;img alt=&quot;image.png&quot; title=&quot;image.png&quot; src=&quot;https://cdn.nlark.com/yuque/0/2019/png/325426/1564203095456-c8afcadb-bfd4-469d-a209-0be20a1b2662.png#align=left&amp;display=inline&amp;height=377&amp;name=image.png&amp;originHeight=352&amp;originWidth=473&amp;size=108206&amp;status=done&amp;width=506&quot; style=&quot;max-width: 600px; width: 506px;&quot;&gt;&lt;/p&gt;</p> <h2 id="tree-diff算法"><a href="#tree-diff算法" class="header-anchor">#</a> Tree-Diff算法</h2> <p>&lt;p&gt;虚拟DOM树改变的三种情况&lt;/p&gt;</p> <h3 id="标签的改变"><a href="#标签的改变" class="header-anchor">#</a> 标签的改变</h3> <p>&lt;p&gt;删掉旧标签，添加新标签。&lt;/p&gt;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>renderA<span class="token punctuation">:</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
renderB<span class="token punctuation">:</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>
<span class="token punctuation">[</span>removeNode <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>insertNode <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">]</span> 
</code></pre></div><p>&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;</p> <h3 id="组件的改变"><a href="#组件的改变" class="header-anchor">#</a> 组件的改变</h3> <p>&lt;p&gt;不同的组件一般会产生不一样的DOM结构。&lt;/p&gt;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>renderA<span class="token punctuation">:</span> <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span>
renderB<span class="token punctuation">:</span> <span class="token operator">&lt;</span>content<span class="token operator">&gt;</span>
<span class="token punctuation">[</span>removeNode <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>Content <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">]</span> 
</code></pre></div><p>&lt;/span&gt;&lt;/header&gt;&lt;/content&gt;&lt;/header&gt;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
 <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token punctuation">(</span>
     <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>header<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
   <span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token function">componentDidMount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'header mount'</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token function">componentWillUnmount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'header unmounted'</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Content</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
 <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token punctuation">(</span>
     <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Content<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
   <span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token function">componentDidMount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'content mount'</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token function">componentWillUnmount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'content unmounted'</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
 <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
     bool<span class="token punctuation">:</span> <span class="token boolean">false</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token punctuation">(</span>
     <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
       <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>bool <span class="token operator">?</span> <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span> <span class="token punctuation">:</span> <span class="token operator">&lt;</span>content<span class="token operator">&gt;</span><span class="token punctuation">}</span>
     <span class="token operator">&lt;</span><span class="token operator">/</span>content<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
   <span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code></pre></div><h3 id="key优化"><a href="#key优化" class="header-anchor">#</a> Key优化</h3> <p>&lt;p&gt;列表循环一定要声明key属性&lt;/p&gt;&lt;p&gt;key必须唯一 &lt;code&gt;key={item}&lt;/code&gt;&lt;/p&gt;</p> <div class="language-undefined extra-class"><pre class="language-text"><code>old: a,b,c,d
new: b,a,d,c 
</code></pre></div><div class="language-undefined extra-class"><pre class="language-text"><code>['react','vue','angular'] --&gt; ['vue','angular'] 
</code></pre></div><p>&lt;p&gt;优化前：&lt;/p&gt;</p> <div class="language-undefined extra-class"><pre class="language-text"><code>'react' --&gt; 'vue'
'vue' --&gt; 'angular'
'angular' unmount 
</code></pre></div><p>&lt;p&gt;优化后:&lt;/p&gt;</p> <div class="language-undefined extra-class"><pre class="language-text"><code>'react' unmount 
</code></pre></div><h3 id="逐层进行节点比较"><a href="#逐层进行节点比较" class="header-anchor">#</a> 逐层进行节点比较</h3> <p>&lt;p&gt;React只会对相同颜色方框内的DOM节点进行比较，即同一个父节点下的所有子节点。&lt;/p&gt;&lt;p&gt;&lt;img alt=&quot;image.png&quot; title=&quot;image.png&quot; src=&quot;https://cdn.nlark.com/yuque/0/2019/png/325426/1564205230734-520ea08b-4106-499f-b660-b33a8ba05784.png#align=left&amp;display=inline&amp;height=406&amp;name=image.png&amp;originHeight=392&amp;originWidth=721&amp;size=89336&amp;status=done&amp;width=746&quot; style=&quot;max-width: 600px; width: 746px;&quot;&gt;&lt;/p&gt;&lt;p&gt;把A节点放到D节点下&lt;/p&gt;&lt;p&gt;&lt;img alt=&quot;image.png&quot; title=&quot;image.png&quot; src=&quot;https://cdn.nlark.com/yuque/0/2019/png/325426/1564205317563-c689541d-bf98-4782-8860-a40a6dbd1993.png#align=left&amp;display=inline&amp;height=370&amp;name=image.png&amp;originHeight=309&amp;originWidth=623&amp;size=57828&amp;status=done&amp;width=746&quot; style=&quot;max-width: 600px; width: 746px;&quot;&gt;&lt;/p&gt;&lt;p&gt;React实现流程：&lt;/p&gt;</p> <div class="language-undefined extra-class"><pre class="language-text"><code>A.destroy();
A = new A();
A.append(new B())
A.append(new C())
D.append(A) 
</code></pre></div><p>&lt;p&gt;&lt;img alt=&quot;image.png&quot; title=&quot;image.png&quot; src=&quot;https://cdn.nlark.com/yuque/0/2019/png/325426/1564205466147-fcf658b5-6efe-4746-a295-a3e0e68dcb59.png#align=left&amp;display=inline&amp;height=180&amp;name=image.png&amp;originHeight=314&amp;originWidth=1036&amp;size=142118&amp;status=done&amp;width=595&quot; style=&quot;max-width: 600px; width: 595px;&quot;&gt;&lt;/p&gt;</p> <h2 id="课后思考"><a href="#课后思考" class="header-anchor">#</a> 课后思考:</h2> <h3 id="什么是jsx-为什么浏览器无法读取jsx？"><a href="#什么是jsx-为什么浏览器无法读取jsx？" class="header-anchor">#</a> 什么是JSX,为什么浏览器无法读取JSX？</h3> <p>&lt;p&gt;&lt;/p&gt;&lt;blockquote style=&quot;padding-left: 1em;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: #333333;&quot;&gt;JSX是一种JavaScript的语法扩展，运用于&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://baike.baidu.com/item/React/18077599&quot;&gt;React&lt;/a&gt;&lt;span style=&quot;color: #333333;&quot;&gt;架构中，其格式比较像是模版语言，但事实上完全是在&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://baike.baidu.com/item/JavaScript/321142&quot;&gt;JavaScript&lt;/a&gt;&lt;span style=&quot;color: #333333;&quot;&gt;内部实现的。元素是构成React应用的最小单位，JSX就是用来声明React当中的元素，React使用JSX来描述用户界面。&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote style=&quot;padding-left: 1em;&quot;&gt;&lt;p&gt;&lt;span class=&quot;lake-fontsize-11&quot; style=&quot;color: #333333;&quot;&gt;JSX其实就是JavaScript对象，会构建创建一个js对象来描述HTML结构的信息。这里要记住JSX是js的一种扩展语言，类似HTML但是又不是HTML，因为JSX中还能进行运算，判断，加入一些js语言等。&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote style=&quot;padding-left: 1em;&quot;&gt;&lt;p&gt;&lt;span class=&quot;lake-fontsize-11&quot; style=&quot;color: #333333;&quot;&gt;虽然JSX看起来像HTML，但它实际上只是一种更灵敏的方式&lt;/span&gt;&lt;code&gt;React.createElement()&lt;/code&gt;&lt;span class=&quot;lake-fontsize-11&quot; style=&quot;color: #333333;&quot;&gt;来编写声明。当组件渲染时，它输出一个React元素树或该组件输出的HTML元素的&lt;/span&gt;&lt;strong&gt;虚拟表示&lt;/strong&gt;&lt;span class=&quot;lake-fontsize-11&quot; style=&quot;color: #333333;&quot;&gt;。React然后将基于此React元素表示来确定对实际DOM所做的更改。&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote style=&quot;padding-left: 1em;&quot;&gt;&lt;p&gt;&lt;span class=&quot;lake-fontsize-11&quot; style=&quot;color: #333333;&quot;&gt;如果我们想要编写纯JavaScript而不是依赖于JSX编译器，我们可以只写该&lt;/span&gt;&lt;code&gt;React.createElement()&lt;/code&gt;&lt;span class=&quot;lake-fontsize-11&quot; style=&quot;color: #333333;&quot;&gt;函数，而不必担心抽象层。但我们喜欢JSX。它特别是更复杂的组件可读性。考虑下面的JSX，&lt;/span&gt;&lt;span class=&quot;lake-fontsize-11&quot; style=&quot;color: #333333;&quot;&gt;虽然你可以跳过JSX并直接编写后者，但JSX语法非常适合表示嵌套的HTML元素。&lt;/span&gt;&lt;span class=&quot;lake-fontsize-11&quot; style=&quot;color: #333333;&quot;&gt;：&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;profile.jpg&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;Profile photo&quot;</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Welcome back Ari<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
</code></pre></div><p>&lt;blockquote style=&quot;padding-left: 1em;&quot;&gt;&lt;p&gt;&lt;span class=&quot;lake-fontsize-11&quot; style=&quot;color: #333333;&quot;&gt;传送到浏览器的JavaScript看起来像这样：&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> 
 React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>src<span class="token punctuation">:</span> <span class="token string">&quot;profile.jpg&quot;</span><span class="token punctuation">,</span> alt<span class="token punctuation">:</span> <span class="token string">&quot;Profile photo&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;h1&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;Welcome back Ari&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="你如何理解virtual-dom的原理？"><a href="#你如何理解virtual-dom的原理？" class="header-anchor">#</a> 你如何理解Virtual DOM的原理？</h3> <p>&lt;p&gt;参考：&lt;a href=&quot;https://www.cnblogs.com/wubaiqing/p/6726429.html&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/wubaiqing/p/6726429.html&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;lake-fontsize-12&quot; style=&quot;color: #4D4D4D;&quot;&gt;相对于DOM对象，原生的JavaScript对象处理得更快，而且简单。DOM树上的结构，属性信息我们都能通过JavaScript进行表示出来：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: #333333;&quot;&gt;HTML&lt;/span&gt;&lt;/p&gt;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>ol id<span class="token operator">=</span><span class="token string">&quot;ol-list&quot;</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item&quot;</span><span class="token operator">&gt;</span>Item <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item&quot;</span><span class="token operator">&gt;</span>Item <span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;item&quot;</span><span class="token operator">&gt;</span>Item <span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ol<span class="token operator">&gt;</span> 
</code></pre></div><p>&lt;p&gt;JAVASCRIPT&lt;/p&gt;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> olE <span class="token operator">=</span> <span class="token punctuation">{</span>
 tagName<span class="token punctuation">:</span> <span class="token string">'ol'</span><span class="token punctuation">,</span> <span class="token comment">// 标签名</span>
 props<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// 属性用对象存储键值对</span>
   id<span class="token punctuation">:</span> <span class="token string">'ol-list'</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 children<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token comment">// 子节点</span>
   <span class="token punctuation">{</span>tagName<span class="token punctuation">:</span> <span class="token string">'li'</span><span class="token punctuation">,</span> props<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">'item'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Item 1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{</span>tagName<span class="token punctuation">:</span> <span class="token string">'li'</span><span class="token punctuation">,</span> props<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">'item'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Item 2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{</span>tagName<span class="token punctuation">:</span> <span class="token string">'li'</span><span class="token punctuation">,</span> props<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">'item'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Item 3&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">]</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>&lt;blockquote style=&quot;padding-left: 1em;&quot;&gt;&lt;p&gt;&lt;span&gt;用 JavaScript 对象结构表示 DOM 树的结构；&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;用这个树构建一个真正的 DOM 树，插到文档当中。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;当状态变更时，重新构造一棵新的对象树。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;然后用新的树和旧的树进行比较差异。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: #D90B00;&quot;&gt;把差异&lt;/span&gt;&lt;span style=&quot;color: #D90B00;&quot;&gt;更新到旧的树上，整个视图就更新了&lt;span style=&quot;color: #333333;&quot;&gt;。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: #D90B00;&quot;&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&lt;span style=&quot;color: #0000FF;&quot;&gt;Virtual DOM 本质就是在 JS 和 DOM 之间做&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: #D90B00;&quot;&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&lt;span style=&quot;color: #0000FF;&quot;&gt;了一个缓存。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: transparent; color: #000000;&quot;&gt;&lt;span&gt;既然&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: #000000;&quot;&gt; DOM 慢，就在 JS 和 DOM 之间加个缓存。JS 先操作 Virtual DOM&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;对比排序/变更，最后再把整个变更写入真实 DOM。&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;</p> <h3 id="react中的key是做什么的？"><a href="#react中的key是做什么的？" class="header-anchor">#</a> React中的key是做什么的？</h3> <p>&lt;p&gt;key属性一般是在输出循环列表时，react要求我们填写的一个属性。&lt;/p&gt;&lt;p&gt;当我们需要渲染一个列表的时候，React 会存储这个列表每一项的相关信息，当我们要更新这个列表时，React需要确定哪些项发生了改变。我们有可能增加、删除、重新排序或者更新列表项。&lt;/p&gt;&lt;p&gt;在交叉对比中，当新节点跟旧节点头尾交叉对比没有结果时，会根据新节点的key去对比旧节点数组中的key，从而找到相应旧节点（这里对应的是一个key =&gt; index 的map映射）。如果没找到就认为是一个新增节点。而如果没有key，那么就会采用遍历查找的方式去找到对应的旧节点。一种一个map映射，另一种是遍历查找。相比而言。map映射的速度更快。&lt;/p&gt;&lt;p&gt;所以说key是给每一个vnode的唯一id,可以依靠key,更准确, 更快的拿到oldVnode中对应的vnode节点，高效和准确的更新节点。&lt;/p&gt;&lt;p&gt;误区：&lt;/p&gt;&lt;p&gt;很多人在写key是通常是将循环的index值写入，这样又写了key，react也不会给出警告了，其实这和没写是一样的。因为在react中如果你没有指定任何 key，react 会发出警告，并且会把数组的索引当作默认的 key。但是如果想要对列表进行重新排序、新增、删除操作时，把数组索引作为 key 是有问题的。显式地使用 key={i} 来指定 key 确实会消除警告，但是仍然和数组索引存在同样的问题，所以大多数情况下最好不要这么做。&lt;/p&gt;</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/oymhiu.html" class="prev">2.1.1 React介绍与React代码规范</a></span> <span class="next"><a href="/docs/xf9o15.html">2.1.3 生命周期与数据操作</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/docs/assets/js/app.272d4102.js" defer></script><script src="/docs/assets/js/2.95440834.js" defer></script><script src="/docs/assets/js/26.f84817cd.js" defer></script>
  </body>
</html>
